{% extends 'base.html' %}

{% block content %}

<!-- Hero Section -->
<div class="bg-gradient-to-br from-[#2D1D7A] to-[#3F1560]">
    <div class="container mx-auto px-6 py-20 text-center">
        <h1 class="text-4xl md:text-6xl font-extrabold text-white leading-tight mb-4">
            Créateur de Solutions Digitales
        </h1>
        <p class="text-lg md:text-xl text-indigo-200 mx-auto max-w-2xl mb-8">
            Je suis un développeur passionné, spécialisé dans la transformation d'idées en applications web performantes et élégantes avec Python & Django.
        </p>
        <div class="flex justify-center space-x-4">
            <a href="#projects" class="px-8 py-3 bg-orange-500 text-white font-semibold rounded-lg shadow-md hover:bg-orange-600 transition-transform duration-300 transform hover:scale-105">
                Voir mes projets
            </a>
            <a href="{% url 'contact' %}" class="px-8 py-3 bg-white/10 text-white border border-white/50 font-semibold rounded-lg shadow-md hover:bg-white/20 transition-colors duration-300">
                Me contacter
            </a>
        </div>
    </div>
</div>

<!-- Projects Section -->
<section id="projects" class="py-20 bg-gray-50">
    <div class="container mx-auto px-6">
        <div class="text-center mb-12">
            <h2 class="text-3xl md:text-4xl font-bold text-gray-800">Une sélection de mes travaux</h2>
            <p class="text-lg text-gray-600 mt-2">Voici quelques-uns des projets sur lesquels j'ai eu le plaisir de travailler.</p>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            {% for project in projects %}
            <div class="bg-white rounded-lg shadow-lg overflow-hidden transform hover:scale-105 transition-transform duration-300">
                {% if project.image %}
                <img class="w-full h-56 object-cover" src="{{ project.image.url }}" alt="Image du projet {{ project.title }}">
                {% endif %}
                <div class="p-6">
                    <h3 class="text-2xl font-bold mb-2">{{ project.title }}</h3>
                    <p class="text-sm text-gray-500 mb-4">{{ project.date|date:"d F Y" }}</p>
                    <p class="text-gray-700 mb-4">{{ project.description|truncatewords:20 }}</p>
                    {% if project.link %}
                    <button data-url="{{ project.link }}" class="open-modal-button inline-block bg-orange-500 text-white font-semibold px-4 py-2 rounded hover:bg-orange-600 transition-colors duration-300">Voir le projet</button>
                    {% endif %}
                </div>
            </div>
            {% empty %}
            <p class="text-center col-span-full">Aucun projet à afficher pour le moment.</p>
            {% endfor %}
        </div>
    </div>
</section>

<!-- Call to Action Section -->
<section class="bg-gradient-to-br from-[#3F1560] to-[#2D1D7A]">
    <div class="container mx-auto px-6 py-16 text-center">
        <h2 class="text-3xl font-bold text-white mb-4">Prêt à démarrer votre projet ?</h2>
        <p class="text-indigo-100 text-lg max-w-xl mx-auto mb-8">
            Discutons de vos idées et voyons comment nous pouvons construire quelque chose d'incroyable ensemble.
        </p>
        <a href="{% url 'contact' %}" class="px-10 py-4 bg-orange-500 text-white font-bold rounded-lg shadow-lg hover:bg-orange-600 transition-transform duration-300 transform hover:scale-105">
            Contactez-moi
        </a>
    </div>
</section>


<!-- Full-screen Modal Structure (inchangé) -->
<div id="project-modal" class="fixed inset-0 bg-white hidden flex flex-col z-50">
    <div class="flex items-center p-3 border-b bg-gray-50 shadow-sm flex-shrink-0">
        <button id="close-modal-button" class="bg-gray-200 text-gray-800 font-semibold px-4 py-2 rounded-lg hover:bg-gray-300 transition-colors duration-300 flex items-center">
            <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg>
            Retour
        </button>
        <h3 id="modal-title" class="text-lg font-bold ml-4 text-gray-700"></h3>
    </div>
    <div class="flex-grow">
        <iframe id="project-iframe" class="w-full h-full border-0" src="" sandbox="allow-scripts allow-forms allow-same-origin"></iframe>
    </div>
</div>

<script>
    // Le script pour la modale reste inchangé
    document.addEventListener('DOMContentLoaded', () => {
        const modal = document.getElementById('project-modal');
        const iframe = document.getElementById('project-iframe');
        const modalTitle = document.getElementById('modal-title');
        const closeModalButton = document.getElementById('close-modal-button');
        const openModalButtons = document.querySelectorAll('.open-modal-button');

        const openModal = (url, title) => {
            iframe.src = url;
            modalTitle.textContent = title;
            modal.classList.remove('hidden');
            modal.classList.add('flex');
        };

        const closeModal = () => {
            modal.classList.add('hidden');
            modal.classList.remove('flex');
            iframe.src = '';
            modalTitle.textContent = '';
        };

        openModalButtons.forEach(button => {
            button.addEventListener('click', () => {
                const projectUrl = button.dataset.url;
                const projectTitle = button.closest('.p-6').querySelector('h3').textContent;
                openModal(projectUrl, projectTitle);
            });
        });

        closeModalButton.addEventListener('click', closeModal);

        document.addEventListener('keydown', (event) => {
            if (event.key === 'Escape' && !modal.classList.contains('hidden')) {
                closeModal();
            }
        });
    });
</script>
{% endblock %}
